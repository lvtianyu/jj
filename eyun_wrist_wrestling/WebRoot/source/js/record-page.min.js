var controller=function(i,e,s){function l(){o=locache.session.get("dress-s_id")||oGetVars.s_id}function a(){i.ajax({type:"get",url:nodeurl+"game/getShopRecord.do",data:{s_id:o},dataType:dataType,beforeSend:function(i){v.show()},success:function(i){if(v.hide(),"ok"==i.result){var e=i.values;return t(e)}var s=i.errormsg;return noticeSetTimeoutPublick(s)},error:function(){v.hide()}})}function t(i){console.log(i);var e,s,l,a,t,d,c,o,r,v,p,g,h,f,k="",_={},y=i.length-1;if(y>-1){do{switch(r=i[y],e=r.a,s=r.b,l=e.head_portrait,a=s.head_portrait,c=e.num,o=s.num,t=e.nickname,d=s.nickname,h=r.level,g=y+1,p=i[y].g_id,h){case 0:v="vs_style0",f="70公斤以下级别";break;case 1:v="vs_style1",f="70~85公斤级别";break;case 2:v="vs_style2",f="85公斤以上级别";break;case 3:v="vs_style3",f="女子级别"}k+="<li id="+p+'><div class="vs-style '+v+'"><ul><li class="frist-people"><div class="head-img"><div><img src='+l+' alt="tou"></div></div><div class="nick-name">'+t+'</div><div class="support-num">'+c+'</div></li><li class="second-people"><div class="head-img"><div id="second-head-img"><img src='+a+' alt="tou"></div></div><div class="nick-name" id="second-nick-name">'+d+'</div><div class="support-num" >'+o+'</div></li></ul><div class="record-mark"><div class="level-mark">'+f+'</div><div class="screening-mark">第<div>'+g+'</div>场</div><div class="make-win"><img src="../source/img/victory@2x.png" ></div></div></div><div class="list-show-view hidden-style"><div class="title-support" >支持<span>'+t+'</span>人数</div><ul class="list-ul"></ul></div></li>',_[p]={g_id:p,g_a:e.u_id,g_b:s.u_id},console.log(_,g)}while(--y>=0);u=_}else k='<li class="notice-none">暂无记录!</li>';return m.append(k),n()}function n(){i("#result-list>li").on("click",function(){var e,s=i(this),l=s.attr("id");i(".active").hide().removeClass("active"),r!=l?(e=u[l],r=l,d(e,s)):r=""})}function d(e,s){i.ajax({type:"get",url:nodeurl+"game/getThumbUpSum.do",data:e,dataType:dataType,beforeSend:function(i){v.show()},success:function(i){if(v.hide(),"ok"==i.result){var e=i.values.list;return c(e,s)}var l=i.errorcode;return noticeSetTimeoutPublick(l)},error:function(){v.hide()}})}function c(i,e){var s,l,a,t,n="",d=i.length-1;if(d>-1){do t=i[d],s=t.head_portrait||"../source/img/img-defaule-head.png",l=t.nickname||"无名氏",a=t.fee,n+='<li><div class="head-img-spectator"><img src='+s+' alt=""></div><ul><li class="nick-name-spectator">'+l+'</li><li class="support-money"> '+a+"元</li></ul></li>";while(--d>=0)}else n+='<li class="notice-none">暂无支持者!</li>';e.find(".list-ul").html(n),e.find(".list-show-view").show().addClass("active")}var o,r,u=[],v=i("#backgroundFefresh"),m=i("#result-list"),p=function(){l(),a()};return{doInit:p}}(Zepto,window,document);$(function(){controller.doInit()});