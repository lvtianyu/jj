var controller=function(e,o,n){function l(){g=o.localStorage.getItem("userphone"),d=o.localStorage.getItem("userpwd"),h=o.localStorage.getItem("s_name"),c.val(g),u.val(d)}function r(){var e=c.val(),o="请录入您真实的手机号码!",n=12,l=/^1[3|4|5|7|8]\d{9}$/g;s.telephone=testInput(e,l,o,n,c)}function t(){var n,l={},r=u.val();if(l.r_phone=s.telephone,l.r_password=hex_md5(r),n=s.telephone?!r&&"请填正确的写密码!":"请填写注册的手机号",d&&g&&c.val()==g&&r==d)console.log(c.val()),e(".login-mark-tips").html("当前所在的店铺是"+h),e("#login-mark").show(),e("#makesure").on("click",function(){a(o.localStorage.getItem("s_id"))}),e("#close").on("click",function(){e("#login-mark").hide()});else{if(console.log("这里表示buchenggon"),n)return u.val(""),noticeSetTimeoutPublick(n);e.ajax({type:"post",url:nodeurl+"referee/refereeLogin.do",data:l,dataType:"json",beforeSend:function(o){e("#backgroundFefresh").show()},success:function(n){console.log(l),console.log(n),e("#backgroundFefresh").hide(),"000000"==n.errorcode?(console.log("成功了"),o.localStorage.userphone=l.r_phone,o.localStorage.userpwd=r,o.localStorage.s_id=n.values.s_id,o.localStorage.s_name=n.values.s_name,e(".login-mark-tips").html("当前所在的店铺是"+n.values.s_name),e("#login-mark").show(),e("#makesure").on("click",function(){a(n.values.s_id)}),e("#close").on("click",function(){e("#login-mark").hide()})):"000025"==n.errorcode?(e(".entry-mark-tips").html("尚未注册"),e("#entry_mark").show(),e("#entry_mark").on("click",function(){e(this).hide()})):"000027"==n.errorcode&&(e(".entry-mark-tips").html("用户名或者密码错误"),e("#entry_mark").show(),e("#entry_mark").on("click",function(){e(this).hide()}))},error:function(o){console.log(l),console.log(o),e("#backgroundFefresh").hide()}})}}function a(e){var o="referee-design-game.html?s_id="+e;locationSelf.replace(o)}var c=e("#telephone"),i=e("#logn-in"),s={},u=e("#password"),g=null,d=null,h=null;c.on("blur",r),i.on("click",t);var m=function(){l()};return{doInit:m}}(Zepto,window,document);$(function(){controller.doInit()});