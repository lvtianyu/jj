var controller=function(e,n,o){function t(){var e=locache.session.get("s_id");return f=oGetVars.s_id||e,d=oGetVars.g_id,f!=e&&locache.session.set("s_id",f),d?a(d):r()}function r(){e.ajax({type:"get",url:nodeurl+"game/generateCompetitionQrCode.do",data:{s_id:f},dataType:dataType,beforeSend:function(e){_.show()},success:function(e){if(_.hide(),"ok"==e.result)return d=e.values,a(d);var n=e.errormsg;return noticeSetTimeoutPublick(n)},error:function(){_.hide()}})}function i(){console.log(d),d&&e.ajax({type:"get",url:nodeurl+"game/getCompetitorsInfo.do",data:{g_id:d},dataType:dataType,beforeSend:function(e){},success:function(n){if("ok"==n.result){b=!0;var o=n.values;locache.session.set("refereeViewInfor",o),e("#firstName").html(o.a.nickname),e("#secondName").html(o.b.nickname),h.show()}else{var t=n.errormsg;noticeSetTimeoutPublick(t)}},complete:function(e){},error:function(){}})}function c(){var e=setTimeout(function(){b?clearTimeout(e):i()},1e4)}function a(e){var n=nodeurl+"pages/participant-view.html?gameId="+e+"="+f;return m.qrcode({width:160,height:160,text:n}),c()}function u(){h.hide();var e={s_id:f,g_id:d},n="game/cancelTheGame.do",o=new PublickFn(n,e,l);o.ajaxFn(),o=null}function l(n){d=n.g_id,console.log(d),e("canvas").remove(),a(d)}function s(e){var n=e+"?g_id="+d;locationSelf.replace(n)}var d,f,g=e("#record-page-btn"),m=e("#QR-code-rgp"),h=e("#game-over"),v=e("#back-game"),p=e("#ok"),k=e("#cancel-game"),_=e("#backgroundFefresh"),b=!1;g.on("click",function(){var e="record-page.html";locationSelf.href=e+"?s_id="+f}),e("#to-referee-btn").on("click",function(){return console.log(1),i()}),v.on("click",function(){h.hide()}),p.on("click",function(){if(h.hide(),b){var e="referee-view.html";return s(e)}}),k.on("click",function(){u()});var w=function(){t()};return{doInit:w}}(Zepto,window,document);$(function(){controller.doInit()});